generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model carts {
  cartId    Int      @id @default(autoincrement())
  userEmail String   @db.VarChar(100)
  productId Int
  qty       Int      @default(0)
  isPaid    Boolean  @default(false)
  products  products @relation(fields: [productId], references: [productId], map: "Carts_productId_fkey")
  users     users    @relation(fields: [userEmail], references: [email], map: "Carts_userEmail_fkey")

  @@index([productId], map: "fk_carts_products_idx")
  @@index([userEmail], map: "fk_carts_users_idx")
}

model favprd {
  userEmail String   @db.VarChar(100)
  productId Int
  products  products @relation(fields: [productId], references: [productId], map: "FavPrd_productId_fkey")
  users     users    @relation(fields: [userEmail], references: [email], map: "FavPrd_userEmail_fkey")

  @@id([productId, userEmail])
  @@index([productId], map: "fk_FavPRD_products1_idx")
  @@index([userEmail], map: "fk_FavPRD_users1_idx")
}

model products {
  productId Int      @id @default(autoincrement())
  product   String   @db.VarChar(100)
  price     Int      @default(0)
  stock     Int      @default(0)
  like      Int      @default(0)
  carts     carts[]
  favprd    favprd[]
}

model users {
  userId    Int      @id @default(autoincrement())
  name      String   @db.VarChar(100)
  email     String   @unique(map: "Users_email_key") @db.VarChar(100)
  password  String   @db.VarChar(100)
  role      String   @default("user") @db.VarChar(11)
  createdAt DateTime @default(now())
  updatedAt DateTime
  carts     carts[]
  favprd    favprd[]
}
